<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.study.springboot.dao.IPlaceDao">
	<select id="listDao" resultType="com.study.springboot.dto.PlaceDto">
		<![CDATA[
		select * from (select rownum num, A.* from (select * from place order by place_number desc) A
		where rownum <= #{param1} ) B where B.num >= #{param2}
		]]>
	</select>
	
	<insert id="rentDao" parameterType="java.util.HashMap">
		<![CDATA[
		insert into place (place_number, place_name, place, place_place, place_people_num, 
							place_price, place_phone, place_email, place_content, 
							place_image, place_receivestartdate, place_receiveenddate,
							place_receivestarttime, place_receiveendtime, place_space
							)
			values (place_seq.nextval, #{place_name}, #{place_place}, #{place_place2}, #{place_people_num}, #{place_price}, 
					#{place_phone}, #{place_email}, #{place_content}, #{place_image}, #{place_rdate}, #{place_redate},
					#{place_rtime}, #{place_retime}, #{place_space})		
		]]>
	</insert>
	
	<select id="viewDao" resultType="com.study.springboot.dto.PlaceDto">
		select * from place where place_number = #{param1}
	</select>
	
	<select id="placeModify" resultType="com.study.springboot.dto.PlaceDto">
		select * from place where place_number = #{param1}
	</select>
	
	<update id="modifyOk">
		update place set place_name = #{place_name}, place = #{place_place},
		place_people_num = #{place_people_num}, place_price = #{place_price}, 
		place_phone = #{place_phone}, place_email = #{place_email}, 
		place_content = #{place_content}, place_image = #{place_image},
		place_place = #{place_place2}, place_receiveStartDate = #{place_rdate}, 
		place_receiveStartTime = #{place_rtime},place_receiveEndDate = #{place_redate},
	    place_receiveEndTime = #{place_retime}, place_space = #{place_space}
		where place_number = #{place_number}
	</update>
	
	<select id="totalCount" resultType="int">
		select count(*) as total from place
	</select>
	
	<delete id="placeDelete">
		delete from place where place_number = #{param1}
	</delete>
	
</mapper>